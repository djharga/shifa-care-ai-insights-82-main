# 🔧 تعليمات إصلاح قاعدة البيانات - شفاء كير

## 📋 الوضع الحالي
- ✅ **اتصال قاعدة البيانات:** يعمل بشكل ممتاز
- ✅ **جدول الموظفين:** يحتوي على 2 موظف
- ❌ **الجداول الأخرى:** فارغة (0 سجل)

## 🛠️ خطوات الإصلاح

### الخطوة 1: فتح لوحة تحكم Supabase
1. اذهب إلى [supabase.com](https://supabase.com)
2. سجل دخولك إلى حسابك
3. اختر مشروع شفاء كير
4. اذهب إلى **SQL Editor** في القائمة الجانبية

### الخطوة 2: تنفيذ ملف الإصلاح
1. انسخ كل محتوى ملف `simple-fix.sql`
2. الصقه في SQL Editor
3. اضغط **Run** أو **Ctrl+Enter**

### الخطوة 3: التحقق من النتائج
بعد التنفيذ، يجب أن ترى رسالة نجاح تحتوي على:
```
✅ تم إصلاح قاعدة البيانات بنجاح!
👥 تم إدراج 5 مريض
🏠 تم إدراج 5 غرفة
🛏️ تم إدراج 8 سرير
💰 تم إدراج 5 مصروف مصحة
📅 تم إدراج 5 جلسة
```

## 🔍 التحقق من الإصلاح

### تشغيل اختبار سريع:
```bash
node quick-test.js
```

### النتائج المتوقعة:
```
✅ profiles: 2 سجل
✅ patients: 5 سجل
✅ rooms: 5 سجل
✅ beds: 8 سجل
✅ facility_expenses: 5 سجل
✅ sessions: 5 سجل
```

## 🎯 ما سيتم إصلاحه

### 1. قيود نوع الإدمان
- إضافة دعم للقيم العربية (المخدرات، الكحول، التدخين، إلخ)

### 2. سياسات الأمان
- تعطيل السياسات المعقدة مؤقتاً
- إنشاء سياسات بسيطة تسمح بالوصول

### 3. البيانات الافتراضية
- 5 مرضى مع بيانات كاملة
- 5 غرف مختلفة الأنواع
- 8 أسرّة موزعة على الغرف
- 5 مصاريف مصحة متنوعة
- 5 جلسات علاجية

## ⚠️ ملاحظات مهمة

### إذا واجهت أخطاء:
1. **خطأ في نوع الإدمان:** تأكد من تنفيذ الخطوة 1 أولاً
2. **خطأ في سياسات الأمان:** تأكد من تنفيذ جميع الخطوات
3. **خطأ في الاتصال:** تحقق من اتصال الإنترنت

### بعد الإصلاح:
1. سيعمل النظام بشكل كامل
2. ستظهر جميع البيانات في التطبيق
3. يمكنك إضافة بيانات جديدة
4. جميع الوظائف ستكون متاحة

## 📞 الدعم

إذا واجهت أي مشاكل:
1. تأكد من أنك في المشروع الصحيح في Supabase
2. تحقق من صلاحيات المستخدم
3. راجع رسائل الخطأ بعناية

---

**تم إنشاء هذه التعليمات بواسطة نظام شفاء كير**  
**تاريخ الإنشاء:** 2025-07-05 