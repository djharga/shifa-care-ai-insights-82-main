# 🔧 حل مشكلة تسجيل الدخول - شفا كير

## المشكلة
التطبيق لا يسمح بتسجيل الدخول أو إنشاء حسابات جديدة.

## الأسباب المحتملة

### 1. قاعدة البيانات فارغة
- لا توجد مستخدمين في جدول `profiles`
- لم يتم إعداد Supabase بشكل صحيح

### 2. مشكلة في إعدادات Supabase
- مفاتيح API غير صحيحة
- قاعدة البيانات غير مهيأة

### 3. مشكلة في التطبيق
- خطأ في كود المصادقة
- مشكلة في الاتصال بقاعدة البيانات

## الحلول

### الحل الأول: إنشاء مستخدم تجريبي

#### بيانات الدخول التجريبية:
```
📧 الإيميل: test@shifacare.com
🔑 كلمة المرور: test123456
```

#### خطوات الإنشاء:
1. اذهب إلى لوحة تحكم Supabase
2. اذهب إلى **Authentication** → **Users**
3. اضغط **Add User**
4. أدخل البيانات:
   - Email: `test@shifacare.com`
   - Password: `test123456`
   - Email Confirm: ✅
5. اضغط **Create User**

#### إضافة بيانات المستخدم في قاعدة البيانات:
```sql
INSERT INTO profiles (id, full_name, email, role, permissions, is_active) VALUES (
  'USER_ID_FROM_AUTH', -- استبدل بمعرف المستخدم من Auth
  'مستخدم تجريبي',
  'test@shifacare.com',
  'admin',
  '{
    "manage_users": true,
    "manage_patients": true,
    "manage_sessions": true,
    "view_reports": true,
    "manage_settings": true,
    "manage_finances": true,
    "manage_facility": true,
    "manage_rooms": true
  }',
  true
);
```

### الحل الثاني: إعداد المدير الرئيسي

#### بيانات المدير الرئيسي:
```
📧 الإيميل: djharga@gmail.com
🔑 كلمة المرور: [مخفي لأسباب أمنية]
```

#### خطوات الإعداد:
1. شغل ملف `setup-admin.js`
2. أو اتبع التعليمات في `ADMIN_SETUP.md`

### الحل الثالث: إنشاء حساب جديد

1. اذهب إلى `/auth`
2. اضغط "اعمل حساب جديد"
3. املأ البيانات:
   - الاسم الكامل
   - الإيميل
   - كلمة المرور
4. اضغط "اعمل حساب"

## اختبار الحلول

### 1. اختبار تسجيل الدخول العادي
- اذهب إلى `/auth`
- جرب تسجيل الدخول بالبيانات التجريبية

### 2. اختبار دخول المدير
- اذهب إلى `/admin-login`
- جرب تسجيل الدخول ببيانات المدير

### 3. اختبار إنشاء حساب جديد
- اذهب إلى `/auth`
- اضغط "اعمل حساب جديد"
- املأ البيانات وجرب

## إذا لم تعمل الحلول

### 1. تحقق من Supabase
- تأكد من أن المشروع نشط
- تحقق من مفاتيح API
- تأكد من وجود الجداول

### 2. تحقق من التطبيق
- شغل `npm run dev`
- تحقق من الأخطاء في Console
- تأكد من الاتصال بالإنترنت

### 3. إعادة تعيين قاعدة البيانات
```sql
-- حذف جميع البيانات وإعادة إنشاؤها
TRUNCATE TABLE profiles CASCADE;
TRUNCATE TABLE patients CASCADE;
-- ... باقي الجداول
```

## بيانات الاتصال للدعم

- **GitHub:** https://github.com/djharga/shifa-care-ai-insights-82-main
- **Supabase Project:** https://oyljfpeeckxgfrqwsebk.supabase.co
- **التطبيق:** http://localhost:5173 (في التطوير)

## ملاحظات مهمة

⚠️ **الأمان:**
- غيّر كلمات المرور الافتراضية
- لا تشارك بيانات الدخول
- استخدم كلمات مرور قوية

🔧 **الصيانة:**
- راجع المستخدمين دورياً
- احذف الحسابات غير المستخدمة
- حدث الصلاحيات حسب الحاجة

---

**شفا كير** - نظام إدارة المصحة الذكي  
**المشكلة:** تسجيل الدخول لا يعمل  
**الحل:** إنشاء مستخدم تجريبي أو إعداد المدير الرئيسي 